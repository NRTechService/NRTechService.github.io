<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NR Tech Service</title>
<style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
    header { background: #333; color: #fff; padding: 20px; text-align: center; }
    main { padding: 20px; max-width: 800px; margin: auto; }
    button { background: #007BFF; color: #fff; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; }
    button:hover { background: #0056b3; }
    #adminMenu { display: none; position: fixed; top: 10%; left: 50%; transform: translateX(-50%); background: #fff; padding: 20px; border: 2px solid #333; border-radius: 10px; z-index: 1000; }
    #adminMenu h2 { margin-top: 0; }
</style>
</head>
<body>

<header>
    <h1>NR Tech Service</h1>
</header>

<main>
    <h2>Willkommen!</h2>
    <p>Ich helfe dir bei leichten technischen Problemen. Meine Hilfe kostet <strong>10 Euro</strong>.</p>
    <button onclick="location.href='mailto:nrtechservice@gmail.com'">Mir eine E-Mail schreiben</button>
</main>

<div id="adminMenu">
    <h2>Admin-Menü</h2>
    <p>Gesamtbesucher: <span id="visitorCount">0</span></p>
    <p>Geräteverteilung:</p>
    <canvas id="deviceChart" width="300" height="200"></canvas>
    <button onclick="closeAdminMenu()">Schließen</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let adminPassword = "1234"; // Dein Admin-Passwort
let visitors = JSON.parse(localStorage.getItem('visitors')) || [];

function getDeviceType() {
    const ua = navigator.userAgent;
    if(/Mobi|Android/i.test(ua)) return "Mobil";
    if(/Tablet|iPad/i.test(ua)) return "Tablet";
    return "Desktop";
}

// Besucher speichern
visitors.push({time: new Date(), device: getDeviceType()});
localStorage.setItem('visitors', JSON.stringify(visitors));

// Admin-Menü öffnen
document.addEventListener('keydown', function(e){
    if(e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'v'){
        let pass = prompt("Admin-Passwort eingeben:");
        if(pass === adminPassword){
            showAdminMenu();
        } else {
            alert("Falsches Passwort!");
        }
    }
});

function showAdminMenu() {
    document.getElementById('adminMenu').style.display = "block";

    // Besucherzahlen aktualisieren
    document.getElementById('visitorCount').textContent = visitors.length;

    // Gerätediagramm erstellen
    let deviceCount = {Desktop: 0, Mobil: 0, Tablet: 0};
    visitors.forEach(v => deviceCount[v.device] ? deviceCount[v.device]++ : null);

    const ctx = document.getElementById('deviceChart').getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Desktop', 'Mobil', 'Tablet'],
            datasets: [{
                label: 'Geräteverteilung',
                data: [deviceCount.Desktop, deviceCount.Mobil, deviceCount.Tablet],
                backgroundColor: ['#36A2EB', '#FF6384', '#FFCE56']
            }]
        },
        options: { responsive: false }
    });
}

function closeAdminMenu() {
    document.getElementById('adminMenu').style.display = "none";
}
</script>

</body>
</html>
